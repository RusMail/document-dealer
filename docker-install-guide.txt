# Установка docker-compose на Ubuntu/Debian

## Вариант 1: Docker Compose v1 (классический)
sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

## Вариант 2: Docker Compose v2 (рекомендуется)
sudo apt-get update
sudo apt-get install docker-compose-plugin

## Проверка установки
docker --version
docker compose version

# После установки используйте:
docker compose up -d document-dealer

# Альтернативно, добавьте Document Dealer в существующий docker-compose.yml:
# Добавьте этот блок в ваш файл docker-compose.yml

document-dealer:
  image: node:18-alpine
  container_name: document_dealer
  restart: unless-stopped
  ports:
    - "3002:3002"
  environment:
    - NODE_ENV=production
    - PORT=3002
    - DATABASE_URL=file:./data/dev.db
    - JWT_SECRET=32fbc0ea9082b33151327dd042cd3dffe2ab623f81e4dff4d2b8102f4889b60e
    - N8N_WEBHOOK_URL=https://n8n.n8nvibeauto.ru/webhook/document-generator
    - CORS_ORIGIN=https://doc.n8nvibeauto.ru
  volumes:
    - ./document-dealer-data:/app/data
  networks:
    - caddy_net

# Затем запустите:
docker compose up -d document-dealer
